#// filepath: /home/rodrigo/code/camp/federation/apps/remote/Dockerfile
FROM node:20-alpine

WORKDIR /app

# Copiamos el package.json y package-lock.json del monorepo
COPY ../../package.json ../../package-lock.json ./

# Instalamos las dependencias del monorepo
RUN npm install

# Copiamos las carpetas de la aplicaci贸n remote
COPY . .

# Construimos la aplicaci贸n
RUN npm run build --workspace remote

# Instalamos serve para servir la aplicaci贸n construida
RUN npm install -g serve

# Exponemos el puerto para el remote
EXPOSE 3002

# Comando para servir la aplicaci贸n construida
CMD ["serve", "-s", "apps/remote/dist", "-l", "3002"]